<!doctype html>
<html lang="zh">
<head>
    <!-- http://10.10.22.212:32123/jar-runner.jar -->
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="js/jquery-3.3.1.js"></script>
    <script>
        var parseData = function (result) {
            if (result.code !== 0) {
                $('#message').html(result.message);
                return;
            }

            if (!result.data || !result.data.statuses) {
                return;
            }

            var statuses = result.data.statuses;

            $('#tbody').empty();
            $.each(statuses, function (index, status) {
                $('#tbody').append(
                    $('<tr>').
                    append($('<td>').html(status.host)).
                    append($('<td>').html(status.cpu_usage)).
                    append($('<td>').html(status.mem_total)).
                    append($('<td>').html(status.mem_usage)).
                    append($('<td>').html(status.swap_total)).
                    append($('<td>').html(status.swap_usage))
                );
            });
        };

        var queryData = function () {
            $.get("data", {}, parseData);
        };

        $(function() {
            queryData();
            setInterval(queryData, 5000);
        });
    </script>
    <title>SysMon</title>
</head>
<body>
<div id="message"></div>
<table border="1">
    <thead>
    <tr>
        <td>HOST</td>
        <td>CPU Usage</td>
        <td>Total Memory</td>
        <td>Memory Usage</td>
        <td>Total Swap</td>
        <td>Swap Usage</td>
    </tr>
    </thead>
    <tbody id="tbody">

    </tbody>
</table>
</body>
</html>